webpackJsonp([8],{"2RQO":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),s=a.n(i),n=a("mvHQ"),o=a.n(n),l={data:function(){return{id:"",keywords:"",depName:"",corpusName:"",treeLoading:!1,dialogVisible:!1,updateVisible:!1,allDeps:[],pDep:"",vCorpus:"",treeData:[],totalCount:0,total:0,index:"",cid:"",content:"",emps:[],emp:{id:"",index:"",content:""},tableLoading:!1,multipleSelection:[],currentPage:1,removeArr:[],addDataVisible:!1,corpusData:"",updateDataVisible:!1,updateCorpusData:"",searchWords:"",defaultProps:{label:"name",isLeaf:"leaf",children:"children"},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:3,max:100,trigger:"blur"}]}}},mounted:function(){this.treeLoading=!0,this.loadTreeData()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e){console.log("click data:"+o()(e)),this.cid=e.id,this.vCorpus=e.fid,console.log("cid:"+e.id),this.currentPage=1,this.loadEmps(),this.removeArr=[]},updateCorpus:function(){var e=this;this.updateVisible=!1;var t={};t.name=this.corpusName,t.fid=this.vCorpus,t.id=this.id,console.log("update form:"+o()(t)),this.putRequestJson("/api/corpus/a"+this.id,t).then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.$message({type:t.status,message:"更新成功!"}),e.loadTreeData())}),e.loadAllDeps(),e.deleteLocalDep(e.treeData,t),e.setDataToTree(e.treeData,t.parentId,t)},loadTreeData:function(){var e=this;this.getRequest("api/corpus/getCorpusByFid?fid=-1").then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.treeData=t.data)})},setDataToTree:function(e,t,a){console.log("respD："+a),console.log("respData："+o()(a));for(var i=0;i<e.length;i++){var s=e[i];if(s.id==t)return void(e[i].children=e[i].children.concat(a));this.setDataToTree(s.children,t,a)}},addDep:function(){var e=this;this.dialogVisible=!1,this.treeLoading=!0,this.postRequestJson("/api/corpus/insertCorpus",{name:this.depName,fid:this.pDep}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){console.log(o()(t));var a=t.data;e.depName="",e.$message({type:a.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDep,a.data)}})},loadAllDeps:function(){var e=this;this.getRequest("/api/corpus/getAllByUid").then(function(t){t&&200==t.status&&(e.allDeps=t.data)})},showAddDepView:function(e,t){this.loadAllDeps(),this.dialogVisible=!0,this.pDep=e.id,t.stopPropagation()},showUpdateDepView:function(e,t){-1!=e.fid?(this.loadAllDeps(),this.updateVisible=!0,this.vCorpus=e.fid,this.id=e.id,this.corpusName=e.name,t.stopPropagation()):this.$message({message:"根节点不能修改!",type:"warning"})},deleteDep:function(e,t){var a=this;console.log(e.id),-1!=e.fid?(null!=e.children&&e.children.length>0?this.$message({message:"该语料集下尚有其他语料集，不能被删除!",type:"warning"}):this.$confirm("删除["+e.name+"]语料集, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.treeLoading=!0,a.deleteRequest("/api/corpus/delCorpus/a"+e.id).then(function(t){if(a.treeLoading=!1,t&&200==t.status){var i=t.data;a.$message({message:"删除成功!",type:i.status}),a.deleteLocalDep(a.treeData,e)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),t.stopPropagation()):a.$message({message:"根节点不能被删除!",type:"warning"})},deleteLocalDep:function(e,t){for(var a=0;a<e.length;a++){var i=e[a];if(i.id==t.id)return void e.splice(a,1);this.deleteLocalDep(i.children,t)}},handleSelectionChange:function(e){this.multipleSelection=e},loadEmps:function(){var e=this,t="cid="+this.cid+"&page="+this.currentPage+"&limit=10&word="+this.searchWords;this.getRequest("/api/corpus/getCorpusDataByCid?"+t).then(function(t){if(t&&200==t.status){var a=t.data.data;e.emps=a.rows,console.log("data.total=="+a.total),e.totalCount=a.total}})},currentChange:function(e){console.log("currentChange=="+e),this.currentPage=e,this.loadEmps()},changeFun:function(e){if(console.log("val=="+o()(e)),this.removeArr=[],e)for(var t in e)this.removeArr[t]=e[t].id;console.log("change=="+this.removeArr)},deleteData:function(){var e=this;this.removeArr.length<=0?this.$message({message:"选择要删除的数据!",type:"warning"}):(this.$confirm("删除["+this.removeArr.length+"]条语料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.treeLoading=!0,e.deleteRequest("/api/corpus/delCorpusData/a"+e.removeArr.join()).then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.$message({message:"删除成功!"}),e.removeArr=[],e.loadEmps())})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}),event.stopPropagation())},addDataWin:function(){console.log("addDataWin"),this.corpusData="",""!=this.vCorpus?-1!=this.vCorpus?this.addDataVisible=!0:this.$message({message:"根语料集不能添加语料!",type:"warning"}):this.$message({message:"请先选择语料集!",type:"warning"})},updateDataWin:function(){console.log(this.removeArr.length),this.removeArr.length<=0?this.$message({message:"请选择要修改的数据!",type:"warning"}):this.removeArr.length>1?this.$message({message:"修改的数据只能选择一条!",type:"warning"}):(this.updateCorpusData=this.multipleSelection[0].content,this.id=this.multipleSelection[0].id,this.updateDataVisible=!0)},addDataToStore:function(){var e=this,t=this;console.log("data=="+t.corpusData),""!=this.strTrim(t.corpusData)?(this.addDataVisible=!1,this.postRequestJson("/api/corpus/addCorpusData",{data:t.corpusData,cid:t.cid}).then(function(a){t.treeLoading=!1,a&&200==a.status&&(t.$message({type:a.status,message:"添加成功!"}),e.loadEmps())})):this.$message({message:"请先输入语料!",type:"warning"})},updateDataToStore:function(){var e=this,t=this;""!=this.strTrim(t.updateCorpusData)?(this.updateDataVisible=!1,this.putRequestJson("/api/corpus/updateCorpusData/a"+t.id,{content:t.updateCorpusData}).then(function(a){t.treeLoading=!1,a&&200==a.status&&(t.$message({type:a.status,message:"添加成功!"}),e.removeArr=[],e.loadEmps())})):this.$message({message:"请先输入语料!",type:"warning"})},clickRow:function(e){this.$refs.tb.toggleRowSelection(e);for(var t=-1,a=0;a<this.removeArr.length;a++)if(this.removeArr[a]==e.id){t=a;break}-1!=t?this.removeArr.splice(t,1):this.removeArr.push(e.id)},strTrim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},renderContent:function(e,t){var a,i,n,o=this,l=t.node,r=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[l.label])]),e("span",[e("el-button",(a={attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},style:"font-size: 12px;"},s()(a,"style","padding:3px"),s()(a,"on",{click:function(){return o.showAddDepView(r,event)}}),a),["添加"]),e("el-button",(i={attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},style:"font-size: 12px;"},s()(i,"style","padding:3px"),s()(i,"on",{click:function(){return o.showUpdateDepView(r,event)}}),i),["修改"]),e("el-button",(n={attrs:{icon:"el-icon-delete",type:"danger",size:"mini"},style:"font-size: 12px;"},s()(n,"style","padding:3px"),s()(n,"on",{click:function(){return o.deleteDep(r,event)}}),n),["删除"])])])}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:9}},[a("div",[a("div",{staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"400px",margin:"0px",padding:"0px"},attrs:{placeholder:"输入语料集名称搜索...",size:"mini","prefix-icon":"el-icon-search"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),e._v(" "),a("div",[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",staticStyle:{width:"400px","margin-top":"10px"},attrs:{props:e.defaultProps,data:e.treeData,"filter-node-method":e.filterNode,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{attrs:{title:"添加语料集",visible:e.dialogVisible,width:"25%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("span",[e._v("上级语料集")]),e._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.pDep,callback:function(t){e.pDep=t},expression:"pDep"}},e._l(e.allDeps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("语料集名称")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入语料集..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addDep(t):null}},model:{value:e.depName,callback:function(t){e.depName=t},expression:"depName"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDep}},[e._v("添加")])],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{attrs:{title:"修改语料集",visible:e.updateVisible,width:"25%"},on:{"update:visible":function(t){e.updateVisible=t}}},[a("div",[a("span",[e._v("上级语料集")]),e._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.vCorpus,callback:function(t){e.vCorpus=t},expression:"vCorpus"}},e._l(e.allDeps,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("语料集名称")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请输入语料集..."},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.updateCorpus(t):null}},model:{value:e.corpusName,callback:function(t){e.corpusName=t},expression:"corpusName"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.updateVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.updateCorpus}},[e._v("修改")])],1)])],1)],1)])]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"-25px"},attrs:{span:12}},[a("h4",[e._v("语料列表")]),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-input",{staticStyle:{width:"220px",margin:"-25px 0px 0px 0px",padding:"0px"},attrs:{placeholder:"输入语料搜索...",size:"mini","prefix-icon":"el-icon-search",onkeydown:e.loadEmps},model:{value:e.searchWords,callback:function(t){e.searchWords=t},expression:"searchWords"}}),e._v(" "),a("el-button",{staticStyle:{"font-size":"12px",padding:"6px"},attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.loadEmps}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"0px"}},[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center",height:"45px"}},[a("div",{staticStyle:{"align-content":"center","font-size":"12px"}},[a("el-button",{staticStyle:{"font-size":"12px",padding:"6px"},attrs:{icon:"el-icon-plus",type:"primary",size:"mini"},on:{click:e.addDataWin}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{"font-size":"12px",padding:"6px"},attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:e.updateDataWin}},[e._v("修改")]),e._v(" "),a("el-button",{staticStyle:{"font-size":"12px",padding:"6px"},attrs:{icon:"el-icon-delete",type:"primary",size:"mini"},on:{click:e.deleteData}},[e._v("删除")])],1)])],1),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("transition",{attrs:{name:"slide-fade"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"tb",staticStyle:{width:"120%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange,select:e.changeFun,"select-all":e.changeFun,"row-click":e.clickRow}},[a("el-table-column",{attrs:{type:"selection",prop:"id",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{prop:"index",align:"center",fixed:"",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",align:"left",fixed:"",label:"语料"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?a("el-button",{attrs:{type:"text",size:"mini",disabled:0==e.multipleSelection.length}}):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{attrs:{title:"添加语料",visible:e.addDataVisible,width:"40%"},on:{"update:visible":function(t){e.addDataVisible=t}}},[a("div",{staticStyle:{"margin-top":"5px"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入语料,每回车为一条语料..."},model:{value:e.corpusData,callback:function(t){e.corpusData=t},expression:"corpusData"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.addDataVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDataToStore}},[e._v("添加")])],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{attrs:{title:"修改语料",visible:e.updateDataVisible,width:"40%"},on:{"update:visible":function(t){e.updateDataVisible=t}}},[a("div",{staticStyle:{"margin-top":"5px"}},[a("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:e.updateCorpusData,callback:function(t){e.updateCorpusData=t},expression:"updateCorpusData"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.updateDataVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.updateDataToStore}},[e._v("修改")])],1)])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("HaNg")},null,null);t.default=p.exports},HaNg:function(e,t){},sYjM:function(e,t,a){var i={"./CorpusMana.vue":"2RQO"};function s(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="sYjM"}});
//# sourceMappingURL=8.5ff282c1f02d50934d94.js.map