webpackJsonp([3],{"3uc5":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("0ZYY"),n=a.n(o),l=(a("npPj"),{components:{Treeselect:n.a},data:function(){return{normalizer:function(e){return{id:e.id,label:e.name,children:e.children}},deptids:null,keywords:"",menuName:"",treeLoading:!1,dialogVisible:!1,showOrHidePop:!1,depTextColor:"#c0c4cc",allMenus:[],depts:[],type:[],typeAfter:[{id:"1",value:"直发"},{id:"2",value:"转发"},{id:"3",value:"点赞"},{id:"4",value:"评论"}],score:[{id:"1",value:"1"},{id:"2",value:"2"},{id:"3",value:"3"},{id:"4",value:"4"},{id:"5",value:"5"}],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},reportForm:{typeName:"",name:"",type:[],typeAfter:[],address:"",deptids:null,number:"",score:[],endtime:"",mark:"",notice:""},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{min:3,max:100,trigger:"blur"}]}}},mounted:function(){this.initData(),this.treeLoading=!0,this.loadAllDeps()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e){console.log("click data:"+s()(e)),this.reportForm.departmentName+=e.name+",",this.reportForm.deptids+=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/api/ndept/deptTree/1").then(function(t){var a=t.data;t&&200==t.status&&(e.depts=a.data)})},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},onSubmit:function(e){this.tableLoading=!0;var t=this;console.log("form ****** :"+s()(e)),this.postRequestJson("api/report/publishReport",this.reportForm).then(function(e){e&&200==e.status&&(console.log("ssssssssssssssss"+s()(e)),t.$message({type:e.status,message:e.msg}),t.emptyFormData(),t.loadEmps())})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/report/page?page="+this.currentPage+"&limit=10&name="+this.keywords).then(function(a){if(e.tableLoading=!1,a&&200==a.data.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},cancleEdit:function(){},cancleEditForm:function(){this.emptyFormData()},emptyFormData:function(){this.reportForm={typeName:"",name:"",type:[],typeAfter:[],address:"",deptids:null,number:"",score:[],endtime:"",mark:"",notice:""}},loadAllDeps:function(){var e=this;this.getRequest("/api/reportType/getType").then(function(t){t&&200==t.status&&(e.type=t.data.data.rows)})}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:12}}),e._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[e._v("发布任务")]),e._v(" "),a("el-form",{ref:"reportForm",attrs:{model:e.reportForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称：",prop:"name"}},[a("el-input",{model:{value:e.reportForm.name,callback:function(t){e.$set(e.reportForm,"name",t)},expression:"reportForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务类型：",prop:"typename"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择平台",prop:"type"},model:{value:e.reportForm.type,callback:function(t){e.$set(e.reportForm,"type",t)},expression:"reportForm.type"}},e._l(e.type,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),e._v(" "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择类型",prop:"typeAfter"},model:{value:e.reportForm.typeAfter,callback:function(t){e.$set(e.reportForm,"typeAfter",t)},expression:"reportForm.typeAfter"}},e._l(e.typeAfter,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"任务链接：",prop:"address"}},[a("el-input",{model:{value:e.reportForm.address,callback:function(t){e.$set(e.reportForm,"address",t)},expression:"reportForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下发对象：",prop:"deptids",width:"400"}},[a("treeselect",{attrs:{multiple:!0,options:e.depts,placeholder:"请选择部门",normalizer:e.normalizer},model:{value:e.reportForm.deptids,callback:function(t){e.$set(e.reportForm,"deptids",t)},expression:"reportForm.deptids"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"执行条数：",prop:"number"}},[a("el-input",{attrs:{number:""},model:{value:e.reportForm.number,callback:function(t){e.$set(e.reportForm,"number",t)},expression:"reportForm.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每条分值：",prop:"score"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择类型"},model:{value:e.reportForm.score,callback:function(t){e.$set(e.reportForm,"score",t)},expression:"reportForm.score"}},e._l(e.score,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"任务描述：",prop:"mark"}},[a("el-input",{model:{value:e.reportForm.mark,callback:function(t){e.$set(e.reportForm,"mark",t)},expression:"reportForm.mark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"截止时间：",prop:"endtime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择截止时间"},model:{value:e.reportForm.endtime,callback:function(t){e.$set(e.reportForm,"endtime",t)},expression:"reportForm.endtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通知方式：",prop:"notice"}},[a("el-radio-group",{model:{value:e.reportForm.notice,callback:function(t){e.$set(e.reportForm,"notice",t)},expression:"reportForm.notice"}},[a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"1"}},[e._v("短信通知")]),e._v(" "),a("el-radio",{staticStyle:{"margin-left":"15px"},attrs:{label:"2"}},[e._v("微信通知")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit(e.reportForm)}}},[e._v("发布")]),e._v(" "),a("el-button",{on:{click:e.cancleEditForm}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("wExx")},null,null);t.default=p.exports},"4axH":function(e,t){},"5gYQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("bOdI"),n=a.n(o),l={data:function(){var e;return e={files:[],imageUrl:"",dialogImageUrl:"",dialogVisible:!1,keywords:"",menuName:"",treeLoading:!1},n()(e,"dialogVisible",!1),n()(e,"typeBig",[]),n()(e,"pDep",""),n()(e,"treeData",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"children"}),n()(e,"pushForm",{type:"",typeBig:[],radio2:3,address:"",markto:"",files:[],component:""}),n()(e,"rules",{typeBig:[{required:!0,message:"必填:类型详细",trigger:"change"}],address:[{required:!0,message:"必填:人物地址",trigger:"blur"}],markto:[{required:!0,message:"必填:任务描述",trigger:"blur"}]}),e},mounted:function(){this.treeLoading=!0,this.loadTreeData(),this.loadtypeBig()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{focus:function(){console.log("获取焦点")},clickHandler:function(e){if(3!=e)if(6!=e)if(9!=e);else{t=this;this.getRequest("/api/reportType/getBigType?type=27").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}else{var t=this;this.getRequest("/api/reportType/getBigType?type=10").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}else{var t=this;this.getRequest("/api/reportType/getBigType?type=2").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}},emptyFormData:function(){this.pushForm.radio2=3,this.pushForm.address="",this.pushForm.markto="",this.pushForm.typeBig=""},handleRemove:function(e,t){console.log(e,t)},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG或者PNG格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e){},onSubmit:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;t.tableLoading=!0;var i=t;console.log("submit form:"+s()(e)),t.postRequestJson("api/reportTask/taskReport",t.pushForm).then(function(e){e&&200==e.status?(console.log(s()(e)),i.$message({type:e.data.status,message:"任务上报"+e.data.msg}),i.emptyFormData()):i.$message({type:e.data.status,message:e.data.message})})})},loadTreeData:function(){var e=this;this.getRequest("/api/menu/menuTree/-1").then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.treeData=t.data)})},setDataToTree:function(e,t,a){for(var i=0;i<e.length;i++){var s=e[i];if(s.id==t)return void(e[i].children=e[i].children.concat(a));this.setDataToTree(s.children,t,a)}},addDep:function(){var e=this;this.dialogVisible=!1,this.treeLoading=!0,this.postRequest("/system/basic/dep",{name:this.menuName,parentId:this.pDep}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var a=t.data;e.menuName="",e.$message({type:a.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDep,a.msg)}})},loadtypeBig:function(){var e=this;this.getRequest("/api/reportType/getBigType?type=2").then(function(t){t&&200==t.status&&(e.typeBig=t.data.data)})},showAddDepView:function(e,t){this.loadAllDeps(),this.dialogVisible=!0,this.pDep=e.id,t.stopPropagation()},deleteDep:function(e,t){var a=this;e.children.length>0?this.$message({message:"该菜单下尚有其他子菜单，不能被删除!",type:"warning"}):this.$confirm("删除["+e.name+"]菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.treeLoading=!0,a.deleteRequest("/system/basic/dep/"+e.id).then(function(t){if(a.treeLoading=!1,t&&200==t.status){var i=t.data;a.$message({message:i.msg,type:i.status}),a.deleteLocalDep(a.treeData,e)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),t.stopPropagation()},deleteLocalDep:function(e,t){for(var a=0;a<e.length;a++){var i=e[a];if(i.id==t.id)return void e.splice(a,1);this.deleteLocalDep(i.children,t)}},renderContent:function(e,t){var a,i,s=this,o=t.node,l=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[o.label])]),e("span",[e("el-button",(a={style:"font-size: 12px;",attrs:{type:"primary",size:"mini"}},n()(a,"style","padding:3px"),n()(a,"on",{click:function(){return s.showAddDepView(l,event)}}),a),["添加菜单"]),e("el-button",(i={style:"font-size: 12px;",attrs:{type:"danger",size:"mini"}},n()(i,"style","padding:3px"),n()(i,"on",{click:function(){return s.deleteDep(l,event)}}),i),["删除菜单"])])])}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:12}},[a("h3",[e._v("任务上报")]),e._v(" "),a("el-form",{ref:"pushForm",attrs:{model:e.pushForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务类型：",prop:"type"}},[a("el-radio-group",{on:{change:e.clickHandler},model:{value:e.pushForm.radio2,callback:function(t){e.$set(e.pushForm,"radio2",t)},expression:"pushForm.radio2"}},[a("el-radio",{attrs:{label:3}},[e._v("日常任务")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("特色任务")]),e._v(" "),a("el-radio",{attrs:{label:9}},[e._v("舆情上报")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型详细：",prop:"typeBig"}},[a("el-select",{staticStyle:{width:"590px"},attrs:{placeholder:"请选择"},model:{value:e.pushForm.typeBig,callback:function(t){e.$set(e.pushForm,"typeBig",t)},expression:"pushForm.typeBig"}},e._l(e.typeBig,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"任务地址：",prop:"address"}},[a("el-input",{model:{value:e.pushForm.address,callback:function(t){e.$set(e.pushForm,"address",t)},expression:"pushForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务描述：",prop:"markto"}},[a("el-input",{attrs:{onfocus:e.focus},model:{value:e.pushForm.markto,callback:function(t){e.$set(e.pushForm,"markto",t)},expression:"pushForm.markto"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传截图：",prop:"component"}},[a("el-upload",{attrs:{action:"/api/file/upload","list-type":"picture-card","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,"file-list":e.files}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("pushForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.emptyFormData}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("qaox")},null,null);t.default=p.exports},"9d8p":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("bOdI"),n=a.n(o),l={data:function(){var e;return e={lastReportId:"",fileList:[],imageUrl:"",dialogImageUrl:"",dialogVisible:!1,keywords:"",menuName:"",treeLoading:!1},n()(e,"dialogVisible",!1),n()(e,"typeBig",[]),n()(e,"pDep",""),n()(e,"treeData",[]),n()(e,"defaultProps",{label:"name",isLeaf:"leaf",children:"children"}),n()(e,"pushForm",{type:"",typeBig:[],radio2:3,address:"",markto:"",fileList:[],number:0,component:""}),n()(e,"rules",{typeBig:[{required:!0,message:"必填:类型详细",trigger:"change"}],address:[{required:!0,message:"必填:任务地址",trigger:"blur"}],markto:[{required:!0,message:"必填:任务描述",trigger:"blur"}]}),e},mounted:function(){this.treeLoading=!0,this.loadtypeBig()},watch:{keywords:function(e){this.$refs.tree.filter(e)}},methods:{clickHandler:function(e){if(3!=e)if(6!=e)if(9!=e);else{t=this;this.getRequest("/api/reportType/getBigType?type=27").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}else{var t=this;this.getRequest("/api/reportType/getBigType?type=10").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}else{var t=this;this.getRequest("/api/reportType/getBigType?type=2").then(function(e){e&&200==e.status&&(t.typeBig=e.data.data)})}},emptyFormData:function(){this.pushForm.radio2=3,this.pushForm.address="",this.pushForm.markto="",this.pushForm.typeBig="",this.pushForm.component="",this.$refs.upload.clearFiles()},uploadOnSuccess:function(e,t,a){console.log("*****"+s()(e))},uploadOnError:function(){this.$message.warning("图片上传失败!")},beforeUpload:function(e){var t=e.name.split(".");return"jpg"===t[1]||"png"===t[1]?e:(this.$message.error("上传文件只能是 jpg/png 格式!"),!1)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},onSubmit:function(e){if(this.$refs.upload.submit(),this.pushForm.number=this.$refs.upload.uploadFiles.length,""==e.typeBig||""==e.address||""==e.markto)return!1;if(0!=this.pushForm.number)this.submitFormData(e);else{this.$message.error("请选择图片")}},submitFormData:function(e){this.tableLoading=!0;var t=this;this.postRequestJson("api/reportTask/add",this.pushForm).then(function(e){if(e&&200==e.status){var a=e.data;t.$message({type:a.status,message:a.msg}),t.emptyFormData()}else t.$message({type:201,message:"任务上报失败!"})})},loadTreeData:function(){var e=this;this.getRequest("/api/menu/menuTree/-1").then(function(t){e.treeLoading=!1,t&&200==t.status&&(e.treeData=t.data)})},setDataToTree:function(e,t,a){for(var i=0;i<e.length;i++){var s=e[i];if(s.id==t)return void(e[i].children=e[i].children.concat(a));this.setDataToTree(s.children,t,a)}},addDep:function(){var e=this;this.dialogVisible=!1,this.treeLoading=!0,this.postRequest("/system/basic/dep",{name:this.menuName,parentId:this.pDep}).then(function(t){if(e.treeLoading=!1,t&&200==t.status){var a=t.data;e.menuName="",e.$message({type:a.status,message:"添加成功!"}),e.setDataToTree(e.treeData,e.pDep,a.msg)}})},loadtypeBig:function(){var e=this;this.getRequest("/api/reportType/getBigType?type=2").then(function(t){t&&200==t.status&&(e.typeBig=t.data.data,console.log("typeBig  "+s()(e.typeBig)))})},showAddDepView:function(e,t){this.loadAllDeps(),this.dialogVisible=!0,this.pDep=e.id,t.stopPropagation()},deleteDep:function(e,t){var a=this;e.children.length>0?this.$message({message:"该菜单下尚有其他子菜单，不能被删除!",type:"warning"}):this.$confirm("删除["+e.name+"]菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.treeLoading=!0,a.deleteRequest("/system/basic/dep/"+e.id).then(function(t){if(a.treeLoading=!1,t&&200==t.status){var i=t.data;a.$message({message:i.msg,type:i.status}),a.deleteLocalDep(a.treeData,e)}})}).catch(function(){a.$message({type:"info",message:"已取消删除"})}),t.stopPropagation()},deleteLocalDep:function(e,t){for(var a=0;a<e.length;a++){var i=e[a];if(i.id==t.id)return void e.splice(a,1);this.deleteLocalDep(i.children,t)}}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:12}},[a("h3",[e._v("任务上报")]),e._v(" "),a("el-form",{ref:"pushForm",attrs:{model:e.pushForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务类型：",prop:"type"}},[a("el-radio-group",{on:{change:e.clickHandler},model:{value:e.pushForm.radio2,callback:function(t){e.$set(e.pushForm,"radio2",t)},expression:"pushForm.radio2"}},[a("el-radio",{attrs:{label:3}},[e._v("日常任务")]),e._v(" "),a("el-radio",{attrs:{label:6}},[e._v("特色任务")]),e._v(" "),a("el-radio",{attrs:{label:9}},[e._v("舆情上报")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型详细：",prop:"typeBig"}},[a("el-select",{staticStyle:{width:"590px"},attrs:{placeholder:"请选择"},model:{value:e.pushForm.typeBig,callback:function(t){e.$set(e.pushForm,"typeBig",t)},expression:"pushForm.typeBig"}},e._l(e.typeBig,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"任务地址：",prop:"address"}},[a("el-input",{model:{value:e.pushForm.address,callback:function(t){e.$set(e.pushForm,"address",t)},expression:"pushForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务描述：",prop:"markto"}},[a("el-input",{model:{value:e.pushForm.markto,callback:function(t){e.$set(e.pushForm,"markto",t)},expression:"pushForm.markto"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传截图：",prop:"component"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"file",action:"/api/file/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.uploadOnSuccess,"on-error":e.uploadOnError,"before-upload":e.beforeUpload,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit(e.pushForm)}}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.emptyFormData}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("hW8l")},null,null);t.default=p.exports},H4si:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{fileUploadBtnText:"导入数据",emps:[],ptime:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",totalCount:-1,currentPage:1,deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,emp:{ptime:"",endtime:"",name:"",address:""},rules:{}}},mounted:function(){this.loadEmps()},methods:{exportEmps:function(){window.open("/api/report/exportReports?page=&size=&name="+this.keywords,"_parent")},fileUploadSuccess:function(e,t,a){e&&this.$message({type:e.status,message:e.msg}),this.loadEmps(),this.fileUploadBtnText="导入数据"},fileUploadError:function(e,t,a){this.$message({type:"error",message:"导入失败!"}),this.fileUploadBtnText="导入数据"},beforeFileUpload:function(e){this.fileUploadBtnText="正在导入"},handleSelectionChange:function(e){this.multipleSelection=e},currentChange:function(e){this.currentPage=e,this.loadEmps()},loadReports:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/report/getPublish?ptime="+this.emp.ptime+"&endtime="+this.emp.endtime+"&name="+this.emp.name+"&page="+this.currentPage+"&limit=10").then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/report/getPublish?ptime="+this.emp.ptime+"&endtime="+this.emp.endtime+"&name="+this.emp.name+"&page="+this.currentPage+"&limit=10").then(function(a){if(e.tableLoading=!1,a&&200==a.data.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},emptyEmpData:function(){this.emp={name:"",address:""}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{width:"800px","font-size":"12px"}},[a("span",{staticClass:"demonstration"},[e._v("从")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"200px"},attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.emp.ptime,callback:function(t){e.$set(e.emp,"ptime",t)},expression:"emp.ptime"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("到")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",size:"mini",placeholder:"结束日期"},model:{value:e.emp.endtime,callback:function(t){e.$set(e.emp,"endtime",t)},expression:"emp.endtime"}}),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入任务名称",size:"mini",clearable:""},model:{value:e.emp.name,callback:function(t){e.$set(e.emp,"name",t)},expression:"emp.name"}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.loadReports}},[e._v("搜索")])],1),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-upload",{staticStyle:{display:"inline"},attrs:{"show-file-list":!1,accept:"application/vnd.ms-excel",action:"/employee/basic/importEmp","on-success":e.fileUploadSuccess,"on-error":e.fileUploadError,disabled:"正在导入"==e.fileUploadBtnText,"before-upload":e.beforeFileUpload}},[a("el-button",{attrs:{size:"mini",type:"success",loading:"正在导入"==e.fileUploadBtnText}},[a("i",{staticClass:"fa fa-lg fa-level-up",staticStyle:{"margin-right":"5px"}}),e._v("\n            "+e._s(e.fileUploadBtnText)+"\n          ")])],1),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[a("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n        ")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",align:"left",fixed:"",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"任务名称",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"180",align:"left",label:"任务链接"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticStyle:{color:"cadetblue"},attrs:{target:"_blank",href:t.row.address}},[e._v(e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"发布人",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",width:"100",align:"left",label:"任务类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ptime",width:"200",align:"left",label:"发布时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",width:"200",label:"截止时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",prop:"number",label:"任务数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",width:"240",label:"任务描述"}})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?a("el-button",{attrs:{type:"text",size:"mini",disabled:0==e.multipleSelection.length}}):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(e){a("kh7o")},null,null);t.default=o.exports},StUa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{emps:[],emp:[],keywords:"",fileUploadBtnText:"导入数据",ptime:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,rules:{},missiontype:[],missionstatus:[{value:"",label:"全部"},{value:"0",label:"未审核"},{value:"1",label:"审核未通过"},{value:"2",label:"审核通过"}],reportForm:{starttime:"",endtime:"",missiontype:"",missionstatus:""}}},mounted:function(){this.getmissiontype(),this.loadEmps(),console.log(this)},methods:{exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},getstatus:function(e){return 0==e.status?"未审核":1==e.status?"审核未通过":2==e.status?"审核通过":void 0},getmissiontype:function(){var e=this;this.getRequest("/api/reportType/getmytaskmissiontype?userid=1").then(function(t){var a=t.data;t&&200==t.status&&(e.missiontype=a.data.rows,console.log("*********"))})},searchmission:function(){this.loadEmps()},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.ptime="",this.loadEmps()},handleSelectionChange:function(e){this.multipleSelection=e},deleteManyEmps:function(){var e=this;this.$confirm("此操作将删除["+this.multipleSelection.length+"]条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t="",a=0;a<e.multipleSelection.length;a++)t+=e.multipleSelection[a].id+",";e.doDelete(t)}).catch(function(){})},deleteEmp:function(e){var t=this;this.$confirm("此操作将永久删除["+e.id+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/api/reportType/delmyreport/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var a=e.data;t.$message({type:a.status,message:a.msg}),t.loadEmps()}})},keywordsChange:function(e){""==e&&this.loadEmps()},searchEmp:function(){this.loadEmps()},currentChange:function(e){this.currentPage=e,this.loadEmps()},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/reportType/mytask?page="+this.currentPage+"&limit=10&userid=1&deptid=1&starttime="+this.reportForm.starttime+"&endtime="+this.reportForm.endtime+"&type="+this.reportForm.missiontype+"&status="+this.reportForm.missionstatus).then(function(a){if(e.tableLoading=!1,a&&200==a.data.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},showpicture:function(e){var t=this;this.getRequest("api/report/getPictureAddress?id="+e.id).then(function(e){if(t.emp=[],t.dialogVisible=!0,e&&200==e.data.status){var a=e.data.data;t.emp=a.rows}})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/api/employee/basic/basicdata").then(function(t){if(t&&200==t.status){var a=t.data;e.nations=a.nations,e.politics=a.politics,e.deps=a.deps,e.positions=a.positions,e.joblevels=a.joblevels,e.emp.workID=a.workID}})},emptyEmpData:function(){this.emp={name:"",gender:"",birthday:"",idCard:"",wedlock:"",nationId:"",nativePlace:"",politicId:"",email:"",phone:"",address:"",departmentId:"",departmentName:"所属部门...",jobLevelId:"",posId:"",engageForm:"",tiptopDegree:"",specialty:"",school:"",beginDate:"",workState:"",workID:"",contractTerm:"",conversionTime:"",notWorkDate:"",beginContract:"",endContract:"",workAge:""}}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("从")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"150px",margin:"0px",padding:"0px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.reportForm.starttime,callback:function(t){e.$set(e.reportForm,"starttime",t)},expression:"reportForm.starttime"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("到")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"150px",margin:"0px",padding:"0px"},attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.reportForm.endtime,callback:function(t){e.$set(e.reportForm,"endtime",t)},expression:"reportForm.endtime"}}),e._v(" "),a("el-select",{staticStyle:{width:"150px",margin:"0px",padding:"0px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.reportForm.missiontype,callback:function(t){e.$set(e.reportForm,"missiontype",t)},expression:"reportForm.missiontype"}},e._l(e.missiontype,function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),e._v(" "),a("el-select",{staticStyle:{width:"150px",margin:"0px",padding:"0px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.reportForm.missionstatus,callback:function(t){e.$set(e.reportForm,"missionstatus",t)},expression:"reportForm.missionstatus"}},e._l(e.missionstatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),e._v(" "),a("div",{staticStyle:{"margin-left":"5px","margin-right":"20px",display:"inline"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.searchmission}},[e._v("\n          查询\n        ")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.exportEmps}},[a("i",{staticClass:"fa fa-lg fa-level-down",staticStyle:{"margin-right":"5px"}}),e._v("导出数据\n        ")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.advanceSearchViewVisible,expression:"advanceSearchViewVisible"}],staticStyle:{"margin-bottom":"10px",border:"1px","border-radius":"5px","border-style":"solid",padding:"5px 0px 5px 0px","box-sizing":"border-box","border-color":"#20a0ff"}})]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"left",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",align:"left",fixed:"",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",align:"left",fixed:"",label:"上报人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ptime",width:"100",align:"left",label:"上报时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"任务类型",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",width:"90",align:"left",label:"上报图片数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"text",size:"mini"},on:{click:function(a){e.showpicture(t.row)}}},[e._v(e._s(t.row.number)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"200",align:"left",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mark",width:"200",label:"上报描述"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",prop:"status",formatter:e.getstatus,label:"审批状态"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",prop:"value",label:"审批信息"}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",width:"80",label:"得分"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"danger",size:"mini"},on:{click:function(a){e.deleteEmp(t.row)}}},[e._v("删除\n              ")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?a("el-button",{attrs:{type:"danger",size:"mini",disabled:0==e.multipleSelection.length},on:{click:e.deleteManyEmps}},[e._v("批量删除\n          ")]):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"77%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.emp,function(e){return a("div",{key:e.id,staticStyle:{display:"inline","padding-right":"10px"}},[a("img",{attrs:{src:e.address,width:"100",height:"100",alt:""}})])}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("关 闭")])],1)],2)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,s,!1,function(e){a("4axH")},null,null);t.default=o.exports},VFXo:function(e,t){},hW8l:function(e,t){},iULA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("0ZYY"),n=a.n(o),l=(a("npPj"),{components:{Treeselect:n.a},data:function(){return{normalizer:function(e){return{id:e.id,label:e.name,children:e.children}},dialogFormVisible:!1,data:[],status:[{id:"2",value:"审核通过"},{id:"1",value:"审核未通过"}],type:[{id:"-1",value:"全部"},{id:"0",value:"未审核"},{id:"1",value:"审核未通过"},{id:"2",value:"审核通过"}],depts:[],emps:[],pictures:[],fileUploadBtnText:"导入数据",ptime:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,deps:[],defaultProps:{label:"name",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,emp:{type:[],number:"",deptids:null,ptime:"2018-01-01",endtime:"2018-10-10",name:"",address:""},auditForm:{name:"",id:"",status:[],mark:"",score:"",type:""},formLabelWidth:"120px"}},mounted:function(){this.initData(),this.loadEmps()},methods:{cancelAudit:function(){this.dialogFormVisible=!1,this.auditForm.mark="",this.auditForm.status=""},submitForm:function(e){this.tableLoading=!0;var t=this;this.postRequestJson("api/reportTask/updateAudit",this.auditForm).then(function(e){e&&200==e.status?(console.log(s()(e)),t.$message({type:e.data.status,message:e.data.msg}),t.loadEmps()):(t.$message({type:e.data.status,message:e.data.msg}),t.loadEmps())}),t.dialogFormVisible=!1},audit:function(e){console.log("*************"+s()(e)),this.auditForm.score=e.number,this.auditForm.id=e.id,this.auditForm.type=e.status,this.cancelAudit(),this.dialogFormVisible=!0},showPictuer:function(e){var t=this;this.getRequest("api/report/getPictureAddress?id="+e.id).then(function(e){if(t.pictures=[],t.dialogVisible=!0,e&&200==e.data.status){var a=e.data.data;t.pictures=a.rows}})},formatterColum:function(e,t){switch(e.status){case 0:return"未审核";case 1:return"审核未通过";case 2:return"审核通过"}},showAdvanceSearchView:function(){this.advanceSearchViewVisible=!this.advanceSearchViewVisible,this.keywords="",this.advanceSearchViewVisible||(this.emptyEmpData(),this.ptime="",this.loadEmps())},handleSelectionChange:function(e){this.multipleSelection=e},deleteEmp:function(e){var t=this;this.$confirm("此操作将永久删除["+e.name+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.doDelete(e.id)}).catch(function(){})},doDelete:function(e){this.tableLoading=!0;var t=this;this.deleteRequest("/report/delete/"+e).then(function(e){if(t.tableLoading=!1,e&&200==e.status){var a=e.data;t.$message({type:a.status,message:a.msg}),t.loadEmps()}})},keywordsChange:function(e){""==e&&this.loadEmps()},searchEmp:function(){this.loadEmps()},currentChange:function(e){this.currentPage=e,this.loadEmps()},loadReports:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/reportTask/reportAudit?page="+this.currentPage+"&limit=10&ptime="+this.emp.ptime+"&endtime="+this.emp.endtime+"&deptid="+this.emp.deptids+"&status="+this.emp.type).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("api/reportTask/reportAudit?page="+this.currentPage+"&limit=10&ptime="+this.emp.ptime+"&endtime="+this.emp.endtime+"&deptid="+this.emp.deptids+"&status="+this.emp.type).then(function(a){if(e.tableLoading=!1,a&&200==a.data.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},addEmp:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.emp.id?(t.tableLoading=!0,t.putRequest("/employee/basic/emp",t.emp).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=e.data;a.$message({type:t.status,message:t.msg}),a.dialogVisible=!1,a.emptyEmpData(),a.loadEmps()}})):(t.tableLoading=!0,t.postRequest("/employee/basic/emp",t.emp).then(function(e){if(a.tableLoading=!1,e&&200==e.status){var t=e.data;a.$message({type:t.status,message:t.msg}),a.dialogVisible=!1,a.emptyEmpData(),a.loadEmps()}}))})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.emp.departmentName=e.name,this.emp.deptids=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.emp.departmentName=e.name,this.emp.deptids=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},initData:function(){var e=this;this.getRequest("/api/ndept/deptTree/1").then(function(t){var a=t.data;t&&200==t.status&&(e.depts=a.data,console.log(e.depts),e.data=a.data)})},emptyEmpData:function(){this.emp={name:"",address:"",deptids:null}}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{"align-content":"center","font-size":"14px"}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"demonstration"},[e._v("从")]),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.emp.ptime,callback:function(t){e.$set(e.emp,"ptime",t)},expression:"emp.ptime"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"demonstration"},[e._v("到")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",size:"mini",placeholder:"结束日期"},model:{value:e.emp.endtime,callback:function(t){e.$set(e.emp,"endtime",t)},expression:"emp.endtime"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("treeselect",{attrs:{size:"small",multiple:!0,options:e.depts,placeholder:"请选择地区",normalizer:e.normalizer},model:{value:e.emp.deptids,callback:function(t){e.$set(e.emp,"deptids",t)},expression:"emp.deptids"}})],1),e._v(" "),a("el-col",{attrs:{span:5,push:1}},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"请选择类型",prop:"type"},model:{value:e.emp.type,callback:function(t){e.$set(e.emp,"type",t)},expression:"emp.type"}},e._l(e.type,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3,push:1}},[a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.loadReports}},[e._v("搜索")])],1)],1)]),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticStyle:{width:"100%",height:"100%"},attrs:{title:"任务审批",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"auditForm",attrs:{model:e.auditForm}},[a("el-form-item",{attrs:{label:"分值:","label-width":e.formLabelWidth,prop:"score"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off",readonly:!0},model:{value:e.auditForm.score,callback:function(t){e.$set(e.auditForm,"score",t)},expression:"auditForm.score"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审核与否:","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"320px"},attrs:{prop:"status"},model:{value:e.auditForm.status,callback:function(t){e.$set(e.auditForm,"status",t)},expression:"auditForm.status"}},e._l(e.status,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"审核信息:","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"320px",height:"300px"},attrs:{rows:2,placeholder:"请输入内容"},model:{value:e.auditForm.mark,callback:function(t){e.$set(e.auditForm,"mark",t)},expression:"auditForm.mark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelAudit}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.auditForm)}}},[e._v("确 定")])],1)],1)],1),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"index",align:"left",fixed:"",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"left",fixed:"",label:"上报人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ptime",width:"180",align:"left",label:"上报时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",width:"200",align:"left",label:"任务类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",width:"100",align:"left",label:"上报图片数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showPictuer(t.row)}}},[e._v("\n                "+e._s(t.row.number)+"\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"150",label:"地址"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",prop:"markto",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"180",label:"审批状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.status?a("span",{staticStyle:{color:"sandybrown"}},[e._v("未审核")]):e._e(),e._v(" "),"1"==t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("审核未通过")]):e._e(),e._v(" "),"2"==t.row.status?a("span",{staticStyle:{color:"green"}},[e._v("审核通过")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"单条分值",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.status||"1"==t.row.status?a("span",[e._v("0")]):e._e(),e._v(" "),"2"==t.row.status?a("span",[e._v("1")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"gold"},attrs:{type:"text"},on:{click:function(a){e.audit(t.row)}}},[e._v("审核")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?a("el-button",{attrs:{type:"text",size:"mini",disabled:""}}):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1),e._v(" "),a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogVisible,width:"77%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.pictures,function(e){return a("div",{key:e.id,staticStyle:{display:"inline","padding-right":"10px"}},[a("img",{attrs:{src:e.address,width:"100",height:"100",alt:""}})])}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.cancelEidt}},[e._v("关 闭")])],1)],2)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("VFXo")},null,null);t.default=p.exports},ju05:function(e,t){},kIIv:function(e,t,a){var i={"./TaskExecute.vue":"iULA","./TaskMytask.vue":"StUa","./TaskPublish.vue":"3uc5","./TaskPull.vue":"H4si","./TaskPush.vue":"9d8p","./TaskPush1.vue":"5gYQ","./TaskReceive.vue":"x+ZA"};function s(e){return a(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id="kIIv"},kh7o:function(e,t){},qaox:function(e,t){},wExx:function(e,t){},"x+ZA":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),o=a("bOdI"),n=a.n(o),l={data:function(){return{emps:[],typeBig:[],keywords:"",ptime:"",beginDateScope:"",faangledoubleup:"fa-angle-double-up",faangledoubledown:"fa-angle-double-down",dialogTitle:"",multipleSelection:[],depTextColor:"#c0c4cc",nations:[],politics:[],positions:[],joblevels:[],totalCount:-1,currentPage:1,deps:[],defaultProps:{label:"name",isLeaf:"leaf",children:"children"},dialogVisible:!1,tableLoading:!1,advanceSearchViewVisible:!1,showOrHidePop:!1,showOrHidePop2:!1,emp:n()({typeBig:[],id:"",name:"",typeName:"",address:"",username:"",ptime:"",endtime:"",status:"",score:"",number:"",number2:""},"address",""),rules:{}}},mounted:function(){this.initDate(),this.loadTaskTypeName(),this.loadEmps()},methods:{changePage:function(e){this.$router.push({path:e}),console.log(e)},handleSuccess:function(e,t,a){console.log("response  "+s()(e)),200==e.status?this.$message.success(e.msg):this.$message.error(e.msg),this.loadEmps(),console.log("file  "+s()(t)),console.log("fileList  "+s()(a))},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},exportEmps:function(){window.open("/employee/basic/exportEmp","_parent")},cancelSearch:function(){this.advanceSearchViewVisible=!1,this.emptyEmpData(),this.beginDateScope="",this.loadEmps()},handleSelectionChange:function(e){this.multipleSelection=e},currentChange:function(e){this.currentPage=e,this.loadEmps()},initDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate(),s=t+"-"+a+"-"+i,o=a-1;o<10&&(o="0"+o),this.emp.endtime=s,this.emp.ptime=t+"-"+o+"-"+i},loadReports:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/api/report/getReceive?page="+this.currentPage+"&limit=10&type="+this.emp.typeBig+"&ptime="+this.emp.ptime+"&endtime="+this.emp.endtime).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},loadEmps:function(){var e=this,t=this;this.tableLoading=!0,this.getRequest("/api/report/getReceive?page="+this.currentPage+"&limit=10&type="+this.emp.typeBig+"&ptime="+this.emp.ptime+"&endtime="+this.emp.endtime).then(function(a){if(e.tableLoading=!1,a&&200==a.status){var i=a.data.data;t.emps=i.rows,t.totalCount=i.total}})},loadTaskTypeName:function(){var e=this;this.tableLoading=!0,this.getRequest("api/report/getReportTypeName").then(function(t){t&&200==t.status&&(e.typeBig=t.data.data)})},cancelEidt:function(){this.dialogVisible=!1,this.emptyEmpData()},showDepTree:function(){this.showOrHidePop=!this.showOrHidePop},showDepTree2:function(){this.showOrHidePop2=!this.showOrHidePop2},handleNodeClick:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop=!1,this.depTextColor="#606266"},handleNodeClick2:function(e){this.emp.departmentName=e.name,this.emp.departmentId=e.id,this.showOrHidePop2=!1,this.depTextColor="#606266"},See:function(e){console.log(e),window.location.href=e.address},emptyEmpData:function(){this.emp={name:"",address:""}}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{staticStyle:{padding:"0px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{"align-content":"center","font-size":"12px"}},[a("span",{staticClass:"demonstration"},[e._v("从")]),e._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"date",placeholder:"选择日期"},model:{value:e.emp.ptime,callback:function(t){e.$set(e.emp,"ptime",t)},expression:"emp.ptime"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("到")]),e._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",size:"mini",placeholder:"结束日期"},model:{value:e.emp.endtime,callback:function(t){e.$set(e.emp,"endtime",t)},expression:"emp.endtime"}}),e._v(" "),a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择任务类型"},model:{value:e.emp.typeBig,callback:function(t){e.$set(e.emp,"typeBig",t)},expression:"emp.typeBig"}},e._l(e.typeBig,function(e){return a("el-option",{key:e.id,attrs:{label:e.typeName,value:e.id}})})),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",size:"mini"},on:{click:e.loadReports}},[e._v("搜索")])],1)]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"0px","padding-top":"0px"}},[a("div",[a("transition",{attrs:{name:"slide-fade"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.emps,border:"",stripe:"",size:"mini"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"id",align:"left",fixed:"",label:"编号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",width:"107",align:"left",label:"任务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",width:"150",align:"left",label:"任务类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",width:"140",label:"链接"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.changePage(t.row.address)}}},[e._v(e._s(t.row.address))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",prop:"username",label:"发布人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ptime",width:"120",label:"发布时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endtime",width:"120",label:"结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",width:"100",align:"left",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.status?a("span",{staticStyle:{color:"coral"}},[e._v("正在进行")]):e._e(),e._v(" "),"1"==t.row.status?a("span",{staticStyle:{color:"darkgrey"}},[e._v("已结束")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"score",width:"100",label:"任务分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",width:"80",align:"left",label:"下发数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number2",align:"left",width:"80",label:"完成数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"195",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){e.See(t.row)}}},[e._v("查看截图\n              ")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/file/upload","on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,multiple:"",limit:2,"on-exceed":e.handleExceed}},[a("el-button",{staticStyle:{padding:"3px 4px 3px 4px",margin:"2px"},attrs:{size:"mini",type:"primary",plain:""}},[e._v("点击上传")])],1)]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"2px"}},[e.emps.length>0?a("el-button",{attrs:{type:"text",size:"mini",disabled:0==e.multipleSelection.length}}):e._e(),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":10,"current-page":e.currentPage,layout:"prev, pager, next",total:e.totalCount},on:{"current-change":e.currentChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,r,!1,function(e){a("ju05")},null,null);t.default=p.exports}});
//# sourceMappingURL=3.5a32f7a56263a4b2bb98.js.map